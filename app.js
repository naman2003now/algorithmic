let stage1 = {
    0: ['a', '^', '+', '(', '3', 'L', 'n', 'A', '9', '?', 'w', '4', 'q', '0', 'Q', 'V', '$', 'N', '=', 'U', '@', 'X', 'e', 'x', '&', 'r', 'R', 'd', 'v', ')', 'b', '.', 'y', 'F', 'C', '#', 'G', '_', "'", 'K', 'M', '!', 'I', 'Z', ' ', '5', 'D', 'j', '"', 'k', 'i', '*', 'W', 'z', 't', 'O', '6', ',', 'P', 'T', '2', 'm', 'B', 'H', '8', '-', 'J', 'g', '7', 's', 'o', 'c', 'Y', 'f', 'S', '1', 'p', 'h', '%', 'l', 'u', 'E'],
    1: ['G', 'z', 'U', '"', '(', '^', '&', 'T', 'p', ',', 'A', 'r', 'P', 'H', 'g', 'e', 'c', '!', '-', 'B', 'V', 'y', ' ', 'O', '9', '7', '#', 'C', 'N', 'J', 'm', 'i', 'L', 'f', 'Q', 'q', 'b', 'o', 'R', '_', "'", 'x', '%', 'n', 'I', '$', 'W', 'M', '6', '5', 'a', '8', 'S', 'j', '.', 'K', 'Y', 's', '2', 't', '=', '4', '+', 'F', 'k', '*', 'd', 'D', '3', 'Z', 'w', 'X', '@', '0', 'l', '1', 'h', '?', 'v', ')', 'u', 'E'],
    2: ['X', '8', 'd', 'f', 'A', 'R', 'D', '#', 'C', 'o', 'a', 'g', '7', 'G', '%', '_', 'T', '&', 'Q', ',', ' ', '2', '@', '1', 'H', 'v', 'k', 'Y', '!', 'i', '6', 'e', 'r', 'I', 's', 'O', '*', 'Z', 'V', "'", 'w', 'z', 'p', 'M', 'n', '.', 'F', 'h', '^', 'S', '+', '?', ')', '5', 't', 'N', 'b', '=', 'l', '9', 'u', 'q', '"', 'K', 'B', 'c', '0', '3', 'W', '-', 'x', 'y', 'U', '$', 'L', 'E', 'J', 'P', 'j', '4', 'm', '('],
    3: ['h', 'w', 'R', '%', 's', 'P', '#', 'Y', 'E', 'X', 'W', 'q', '3', '9', 'x', '2', '!', 'n', 'a', '_', 'I', 'L', 'l', 'c', '(', ',', '0', 'z', '=', '1', '7', 'B', '"', '8', '+', '&', '@', 'i', 'k', 'D', 'A', '$', '-', 'O', 'T', 'C', 'S', '5', 'e', 'm', 'b', 'Z', 'j', 'u', 'F', 'M', '*', '6', 'H', '?', 'K', 'g', ')', 'U', "'", 'J', 't', 'o', ' ', '^', 'v', 'f', 'd', 'V', '.', 'G', 'y', 'r', '4', 'N', 'p', 'Q'],
    4: ['m', '2', "'", 'S', '5', 's', 'a', 'V', '!', 'G', 'H', 'C', '%', '&', 'g', 'e', 'B', ')', '+', 'i', 'A', 'Y', '_', 'U', 'K', 'D', 'l', 'z', '(', 'O', '=', 'f', 'b', '1', 'P', 'k', 'M', 'Q', 'd', '*', 'h', 'N', '7', '@', '"', ' ', 'L', '3', 'c', 'Z', '.', 'F', 'j', 'X', 'y', 'T', '9', ',', '#', '^', '-', 'w', 't', '0', 'p', 'R', 'I', 'x', 'q', 'o', 'r', '6', '?', 'J', '4', '8', 'n', 'E', 'u', 'W', '$', 'v'],
    5: ['3', 'S', '&', '+', 'm', '0', '!', 'K', 'M', 'z', 'Z', 't', '.', 'A', '$', 'p', 'b', 'H', '#', '%', 'i', 'k', 'R', 'Y', '4', '-', 'u', '=', 'o', 'L', 'O', 'D', 'X', 'E', '5', 'N', ' ', '(', 'q', 'I', '"', 'r', 'w', '9', 'c', '2', 'j', 'a', 'f', 'n', '?', '*', '1', 'd', '8', 'C', 'g', 'J', '@', 'F', ',', '_', 'W', 's', 'v', 'B', "'", 'Q', 'V', 'x', '6', 'y', 'U', 'h', 'T', '^', ')', 'P', '7', 'e', 'G', 'l'],
    6: ['U', 't', 'A', 'W', '.', '#', '5', 'g', '+', '-', 'v', 'j', '?', 's', '@', ',', 'X', '3', 'y', 'n', 'Q', ')', 'p', 'K', '9', 'x', 'I', 'u', 'O', 'F', ' ', '%', 'f', 'z', 'M', 'D', 'B', 'V', '^', 'N', '7', 'G', 'L', '&', "'", '$', 'R', '(', '2', 'P', 'i', 'H', 'o', '*', '0', '!', 'J', 'E', 'S', 'm', 'C', 'c', '_', 'l', 'Z', 'q', '8', 'e', 'T', 'a', '=', 'b', 'w', '1', 'd', 'k', '4', '"', 'Y', '6', 'r', 'h'],
    7: ['6', 'K', 'B', 'M', '.', 'Z', 't', 'X', '=', 'e', 'T', 'z', 'q', '%', 'c', 'R', 'S', '$', 'C', 'r', '_', '?', 'H', '"', 'G', '2', '^', 'u', 'p', 'E', '+', 'F', 'g', 'N', 'O', 'W', 's', '1', 'Y', 'D', ')', 'o', '!', 'V', '5', '7', 'I', 'x', 'i', "'", 'v', ',', 'a', '*', '@', 'P', '9', 'y', '#', '4', '0', 'U', 'm', 'f', 'j', '3', 'l', ' ', 'w', 'k', '-', '8', 'd', 'A', 'Q', 'h', 'n', 'L', '(', 'J', 'b', '&'],
    8: ['D', '=', '@', 'u', '_', 'O', 't', 'c', '3', 'm', 'f', 'K', '?', 'w', 'x', 'H', '9', '(', 'h', 'T', '4', '%', '6', 'n', 'I', 'g', 'E', "'", '8', 'Y', 'C', '0', 'F', 'r', 'X', '-', 'a', 'b', 'q', 'N', '7', 'B', 'v', '$', 'S', '!', 'Z', 'p', 'W', 'U', 'j', '.', 'M', 'L', '"', '1', 'Q', '&', 'V', '#', ' ', 'A', 'e', 'J', '*', 'y', '^', 'i', 'd', 'P', 'R', '+', 'G', '2', 's', '5', ')', 'o', ',', 'z', 'l', 'k'],
    9: ['X', 'h', 'O', 'b', 'p', '2', 'q', 'P', '0', 'J', 'g', 'Z', 'L', '7', '"', '6', 'o', '?', '%', 'k', 'x', 's', '+', 'K', 'n', 'i', ',', 'm', 'G', 'S', "'", 'e', '1', ')', 'N', 'F', '_', 'R', '!', 'I', ' ', 'f', 'a', 'z', '.', '5', 'j', 'D', 'r', '*', '#', 'W', 'w', 'l', 'Q', 'A', '3', '^', 'U', 'V', 't', '@', 'y', 'E', 'T', '4', 'd', '&', 'v', 'u', 'H', '(', 'M', 'c', '-', 'B', 'C', '9', '8', '$', 'Y', '='],
}

let pos = ['"', 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z', ' ', 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z', "'", '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', ',', '.', '?', '!', '@', '#', '$', '%', '^', '&', '*', '(', ')', '_', '-', '+', '=']


function encryptStage1(text){
    let initialFile = Math.floor(Math.random()*10)
    let result = ""
    let step = Math.floor(Math.random()*10)
    let fileNo = initialFile
    let arr = text.split("")
    let x = 0
    result += step.toString() + initialFile.toString()
    arr.forEach(element => {
        x = 0
        pos.forEach(char =>{
            if(element == char){
                result +=stage1[fileNo][x]
                fileNo += step
                if(fileNo == initialFile){
                    step += 1
                }
                if(fileNo > 9){
                    fileNo -= 9
                }
                if(step == 8){
                    step = 0
                }
            }
            x += 1
        })
    });
    return result
}

function decryptStage1(text){
    let arr = text.split("")
    let result = ""
    let initialFile = parseInt(arr[1])
    arr.splice(1, 1)
    let step = parseInt(arr[0])
    arr.splice(0, 1)
    let fileNo = initialFile
    let x = 0
    arr.forEach(element => {
        x = 0
        stage1[fileNo].forEach(char =>{
            if(element == char){
                result += pos[x]
                fileNo += step
                if(fileNo == initialFile){
                    step += 1
                }
                if(fileNo > 9){
                    fileNo -= 9
                }
                if(step == 8){
                    step = 0
                }
            }
            x += 1
        })
    });
    return result
}

function d(){
    let inp = document.getElementById("text").value
    let d = document.getElementById("text").value.slice(0,1)
    let da = document.getElementById("text").value.slice(1,document.getElementById("text").value.length)
    let rep = parseInt(d)
    inp = da
    for(i = 0; i < rep*5; i++)
        inp = decryptStage1(inp)

    document.getElementById("result").innerHTML = inp
}
function e(){
    let rep = Math.floor(Math.random()*10)
    if(rep == 0){
        rep = 3
    }
    let inp = document.getElementById("text").value
    for(i = 0; i < rep*5; i++)
        inp = encryptStage1(inp)
    document.getElementById("result").innerHTML = rep + inp
}

