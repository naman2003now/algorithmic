let stage1 = {
    0: ['L', '$', 'y', '!', ',', '%', '"', 'b', '1', 'Q', '6', 'u', 'H', 'E', 'q', 'x', '2', 'g', '=', 'C', 'I', '+', '#', 'T', 'G', 'S', '*', 'k', 'Y', '.', 'c', 'j', '7', 'J', 'X', 'e', ' ', '(', 'w', '^', 'm', "'", '3', 'z', 'N', 'P', 'W', '&', 'U', 'O', 'A', ')', 'o', 'v', 'r', '@', 'p', 'D', 't', 'l', 'n', 's', 'M', '-', '0', '5', 'h', 'V', '9', 'd', '_', 'a', 'F', '4', '?', 'K', '8', 'R', 'f', 'B', 'i', 'Z', '\n'],
    1: ['i', 'l', 'W', '6', '8', 'D', 'm', '7', 'S', 'h', '"', '1', 'K', 'J', 'Q', 'a', 'f', '4', 'u', 'L', 'w', "'", 'Z', '#', '&', 'g', '(', 'n', 'q', ' ', 'r', '+', 'z', 'G', 'U', 'A', 'e', 'y', 'T', '2', '0', 'F', '@', 'V', 'M', '9', 'o', '$', '.', 'j', ')', 'd', 'k', '=', 'v', 'P', 'X', 'x', 'O', '?', 'b', 'R', '5', '\n', 'N', '^', 't', '!', '%', 'C', ',', 'p', '*', 'B', 'c', 's', 'H', '3', 'Y', '_', 'E', 'I', '-'],
    2: ['H', 'Z', 'v', 'a', 'X', '0', 'U', 'C', '$', '2', 'l', 'V', 'k', 'A', 'Q', 'T', '?', 't', 'O', 'E', 'u', '1', 'd', '(', 'J', 'b', 'j', 'n', 'h', 'I', 'o', '.', 'x', 'm', 'e', ',', '"', '4', ')', 'W', '\n', '^', 'w', '8', '@', 'Y', 'L', 'i', 'B', 'P', '=', 'R', 'p', '3', 'N', '!', 'q', 'g', '5', '-', 's', '_', 'F', 'M', 'f', '*', 'G', 'z', 'y', '&', 'S', '#', '7', '%', 'K', 'r', ' ', '+', '6', 'c', '9', "'", 'D'],
    3: ['N', 'n', "'", '1', '*', 'p', 't', 'W', 'f', 'v', 'M', '4', 'X', 'L', 'Z', 'z', 'g', ' ', '2', 'D', 'Q', 'q', 'y', 'k', 'V', 'Y', 'u', ',', 'e', '"', 'w', 'r', '\n', 'j', '#', 'K', 'G', 's', 'S', '=', '.', 'l', '6', '^', '8', '@', 'C', '+', 'B', '3', '5', 'x', 'b', 'o', '$', '_', 'O', '&', '9', 'U', 'A', 'R', 'm', '0', '-', '7', 'h', '%', 'd', 'a', 'T', '(', '?', 'I', 'i', 'H', 'E', 'J', '!', 'c', 'P', ')', 'F'],
    4: ['L', 'd', 'y', 'h', 'x', '3', '\n', 'z', 'j', '7', 'R', '!', '(', 'Z', '4', '_', 'q', '%', 'n', '2', ')', '=', 'H', 'F', '6', '0', '5', 'V', '#', 'v', 'B', 'T', '+', '"', '*', 'e', 'M', '8', 'Y', 'l', '&', '@', 'r', 'A', '?', 'O', 'U', 'b', 'I', '$', 'p', 'u', '^', 'W', 'S', 'g', 'E', 'f', 'J', '.', '9', 't', 'G', 'i', 'X', 'C', ',', 's', 'K', 'm', 'k', 'a', 'Q', 'w', '-', 'o', '1', 'D', "'", 'N', ' ', 'P', 'c'],
    5: [',', 'n', '*', 'v', 'd', 'I', 'i', 'f', '\n', 'U', 'h', '7', 'X', 'Q', 'T', 'S', 'Z', '9', 'w', 'P', '"', '.', '3', '#', 'M', "'", 'H', '=', 'B', 'W', 'p', '4', '8', 'g', '&', '_', 'O', 'R', 'F', 'u', 'q', 'y', 'z', 'V', 'K', 'b', 'l', 'e', '?', '(', '!', '1', '6', 'r', 'G', 'x', 'j', '^', 'Y', 'A', 'a', '$', '%', 's', 'D', ')', 'L', 'o', '@', 'k', '+', 't', '-', 'E', '2', 'N', 'c', 'C', '0', ' ', 'm', '5', 'J'],
    6: ['N', 'u', 'H', 'e', 'x', 'D', '9', '!', 'h', '0', 'E', '@', '2', 'z', 'f', 'r', 'U', 'C', 'V', 't', 'm', '_', '%', '3', 'p', 'n', 'A', 'G', '&', 'v', 'q', 'T', "'", 'y', 'b', '#', 's', 'd', 'P', 'B', '1', '$', '4', 'Y', 'M', '7', 'I', '*', '=', 'X', 'F', ' ', 'j', ',', 'k', 'c', 'O', '(', '.', '+', '\n', ')', 'J', '5', '^', '6', 'w', '8', 'Z', 'a', 'S', 'L', 'W', 'R', '?', 'i', 'K', 'g', 'o', '"', 'l', '-', 'Q'],
    7: ['q', 'a', '+', '_', '2', 'Z', '-', 'v', 'H', '3', '(', '"', 'S', 'o', 'e', 'p', 'Y', '6', '#', 'k', 'X', 'G', 'w', 'N', 'F', 'y', 'T', 'L', 'W', '.', 'R', '5', 'Q', 'b', ')', '^', 's', '!', '1', '@', 'A', 'h', 'z', '\n', 't', 'i', '*', 'g', 'J', 'r', 'K', 'P', 'I', 'l', '9', 'n', 'C', ' ', 'x', 'M', '&', '4', ',', 'c', 'j', '=', 'u', '8', 'U', 'V', '7', '0', '%', 'O', '$', 'B', 'd', 'D', '?', 'E', 'f', "'", 'm'],
    8: ['(', 'f', '5', 't', 'u', 'G', 'P', '^', 'W', 'X', 'S', '"', 'y', 'i', 'U', 'j', '%', '\n', 'O', 'F', 'z', 'T', '8', 'I', 'K', '4', 'd', 'H', 'c', 'g', 'p', 'B', 'v', 's', '+', 'a', 'A', 'C', 'x', '#', 'N', 'h', '&', 'E', '?', '=', '2', '3', '@', 'J', 'r', ',', '9', 'R', 'w', 'Y', 'Q', '_', '1', 'b', '7', 'l', 'e', '0', '.', 'q', 'V', 'n', ' ', 'k', 'L', '!', '-', 'm', '$', '*', 'Z', ')', 'D', '6', 'o', 'M', "'"],
    9: ['^', 'N', 'H', '\n', 'R', 'c', 'F', '"', '9', '2', 'K', 'I', '7', '5', 'Z', 'l', '(', 'W', 'X', '6', '$', 'a', '*', 'e', '_', 'y', "'", 'g', 'z', '&', 's', 'L', '.', 'D', 'E', 'Y', 'J', '1', 'O', 'Q', '0', 'B', '4', 't', 'C', 'G', '-', '?', '8', ' ', 'U', '+', 'n', '#', 'b', 'q', ',', 'd', 'j', '=', 'w', 'm', '%', 'h', '3', 'p', 'V', 'o', 'i', 'u', 'f', 'r', 'k', 'S', '@', 'v', 'P', '!', 'x', 'A', 'T', 'M', ')'],
}

let pos = ['"', 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z', ' ', 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z', "'", '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', ',', '.', '?', '!', '@', '#', '$', '%', '^', '&', '*', '(', ')', '_', '-', '+', '=', '\n']

//hello , 2 , 1 , 21$p 
function encryptStage1(text){
    let initialFile = Math.floor(Math.random()*10)
    let result = ""
    let step = Math.floor(Math.random()*10)
    let fileNo = initialFile
    let arr = text.split("")
    let x = 0
    result += step.toString() + initialFile.toString()
    arr.forEach(element => {
        x = 0
        pos.forEach(char =>{
            if(element == char){
                result +=stage1[fileNo][x]
                fileNo += step
                if(fileNo == initialFile){
                    step += 1
                }
                if(fileNo > 9){
                    fileNo -= 9
                }
                if(step == 8){
                    step = 0
                }
            }
            x += 1
        })
    });
    return result
}

function decryptStage1(text){
    let arr = text.split("")
    let result = ""
    let initialFile = parseInt(arr[1])
    arr.splice(1, 1)
    let step = parseInt(arr[0])
    arr.splice(0, 1)
    let fileNo = initialFile
    let x = 0
    arr.forEach(element => {
        x = 0
        stage1[fileNo].forEach(char =>{
            if(element == char){
                result += pos[x]
                fileNo += step
                if(fileNo == initialFile){
                    step += 1
                }
                if(fileNo > 9){
                    fileNo -= 9
                }
                if(step == 8){
                    step = 0
                }
            }
            x += 1
        })
    });
    return result
}

function d(){
    let inp = document.getElementById("text").value
    let d = document.getElementById("text").value.slice(0,1)
    let da = document.getElementById("text").value.slice(1,document.getElementById("text").value.length)
    let rep = parseInt(d)
    inp = da
    for(i = 0; i < rep*3; i++)
        inp = decryptStage1(inp)

    document.getElementById("result").value = inp
    if(isNaN(d)){
        alert("Invalid Encryption");
        document.getElementById("result").value = ""
    }
}
function e(){
    let rep = Math.floor(Math.random()*10)
    if(rep == 0){
        rep = 3
    }
    let inp = document.getElementById("text").value
    for(i = 0; i < rep*3; i++)
        inp = encryptStage1(inp)
    document.getElementById("result").value = rep + inp
}

function copy() {
    /* Get the text field */
    var copyText = document.getElementById("result");
  
    /* Select the text field */
    copyText.select();
    copyText.setSelectionRange(0, 99999); /*For mobile devices*/
  
    /* Copy the text inside the text field */
    document.execCommand("copy");
  
    /* Alert the copied text */
    alert("Copied the text");
  }

